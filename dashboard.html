<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8"><title>PROJECT_0 DASHBOARD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>body { font-family: 'Kanit', sans-serif; background: #f8fafc; }</style>
</head>
<body class="p-4 md:p-8 italic">
    <div class="max-w-6xl mx-auto">
        <div class="bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border">
            <table class="w-full text-center">
                <thead class="bg-slate-900 text-white text-[10px] uppercase">
                    <tr><th class="py-6 pl-8 text-left">Unit ID (HP-ID)</th><th class="text-left">Project Name</th><th>Status</th><th>Visibility</th><th>Manage</th></tr>
                </thead>
                <tbody id="unitTableBody" class="text-xs">
                    <tr><td colspan="5" class="py-20 animate-pulse text-slate-300 font-bold">ðŸ”„ SYNCING DATABASE...</td></tr>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        const API_URL = "https://script.google.com/macros/s/AKfycbxJ_QwwXW7sV8dmAH0J6mzBV5QWMjxm_MWpL74JC6iJUzgikHtt31HNG-koRtzd8AGJ/exec";
        const PROJECT_ID = "Project_0";
        async function init() {
            try {
                const res = await fetch(`${API_URL}?mode=getUnitList&project=${PROJECT_ID}&t=${Date.now()}`);
                const data = await res.json();
                document.getElementById('unitTableBody').innerHTML = data.map(u => `
                    <tr class="hover:bg-slate-50 border-b">
                        <td class="py-5 pl-8 text-left font-bold text-slate-900">${u.id}</td>
                        <td class="text-left font-medium text-slate-500 uppercase">${u.name || '-'}</td>
                        <td><span class="px-3 py-1 bg-green-50 text-green-600 rounded-full font-bold">${u.unitStatus || 'Available'}</span></td>
                        <td class="${u.sysStatus === 'Live' ? 'text-blue-500' : 'text-slate-300'} font-bold">${u.sysStatus || 'Offline'}</td>
                        <td><button onclick="window.location.href='edit.html?id=${u.id}&project=${PROJECT_ID}'" class="p-2 text-blue-500 hover:scale-125 transition-all"><i class="fa-solid fa-pen-to-square"></i></button></td>
                    </tr>`).join('');
            } catch (e) { alert("Connection Error"); }
        }
        window.onload = init;
    </script>
</body>
</html>
